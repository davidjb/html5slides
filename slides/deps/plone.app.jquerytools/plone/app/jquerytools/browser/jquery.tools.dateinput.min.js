/*
                                     
 jQuery Tools v1.2.6 Dateinput - <input type="date" /> for humans

 NO COPYRIGHTS OR LICENSES. DO WHAT YOU LIKE.

 http://flowplayer.org/tools/form/dateinput/

 Since: Mar 2010
 Date: 2011-10-26 11:02 
*/
(function(e,I){function P(a,c){return(new Date(a,c+1,0)).getDate()}function U(a,c){a=""+a;for(c=c||2;a.length<c;)a="0"+a;return a}function V(a,c,j){var r=a.getDate(),h=a.getDay(),s=a.getMonth();a=a.getFullYear();var m={d:r,dd:U(r),ddd:C[j].shortDays[h],dddd:C[j].days[h],m:s+1,mm:U(s+1),mmm:C[j].shortMonths[s],mmmm:C[j].months[s],yy:String(a).slice(2),yyyy:a};c=c.replace(Z,function(f){return f in m?m[f]:f.slice(1,f.length-1)});return $.html(c).html()}function v(a){return parseInt(a,10)}function W(a,
c){return a.getFullYear()===c.getFullYear()&&a.getMonth()==c.getMonth()&&a.getDate()==c.getDate()}function z(a){if(a!==I){if(a.constructor==Date)return a;if(typeof a=="string"){var c=a.split("-");if(c.length==3)return new Date(v(c[0]),v(c[1])-1,v(c[2]));if(!/^-?\d+$/.test(a))return;a=v(a)}c=new Date;c.setDate(c.getDate()+a);return c}}function aa(a,c){function j(b,d,g){o=b;D=b.getFullYear();F=b.getMonth();E=b.getDate();g=g||e.Event("api");g.type="beforeChange";G.trigger(g,[b]);if(!g.isDefaultPrevented()){a.val(V(b,
d.format,d.lang));g.type="change";G.trigger(g);a.data("date",b);h.hide(g)}}function r(b){b.type="onShow";G.trigger(b);e(document).bind("keydown.d",function(d){if(d.ctrlKey)return true;var g=d.keyCode;if(g==8){a.val("");return h.hide(d)}if(g==27||g==9)return h.hide(d);if(e(X).index(g)>=0){if(!w){h.show(d);return d.preventDefault()}var i=e("#"+f.weeks+" a"),t=e("."+f.focus),p=i.index(t);t.removeClass(f.focus);if(g==74||g==40)p+=7;else if(g==75||g==38)p-=7;else if(g==76||g==39)p+=1;else if(g==72||g==
37)p-=1;if(p>41){h.addMonth();t=e("#"+f.weeks+" a:eq("+(p-42)+")")}else if(p<0){h.addMonth(-1);t=e("#"+f.weeks+" a:eq("+(p+42)+")")}else t=i.eq(p);t.addClass(f.focus);return d.preventDefault()}if(g==34)return h.addMonth();if(g==33)return h.addMonth(-1);if(g==36)return h.today();if(g==13)e(d.target).is("select")||e("."+f.focus).click();return e([16,17,18,9]).index(g)>=0});e(document).bind("click.d",function(d){var g=d.target;if(!e(g).parents("#"+f.root).length&&g!=a[0]&&(!J||g!=J[0]))h.hide(d)})}var h=
this,s=new Date,m=s.getFullYear(),f=c.css,K=C[c.lang],k=e("#"+f.root),Q=k.find("#"+f.title),J,L,M,D,F,E,o=a.attr("data-value")||c.value||a.val(),n=a.attr("min")||c.min,q=a.attr("max")||c.max,w,N;if(n===0)n="0";o=z(o)||s;n=z(n||new Date(m+c.yearRange[0],1,1));q=z(q||new Date(m+c.yearRange[1]+1,1,-1));if(!K)throw"Dateinput: invalid language: "+c.lang;if(a.attr("type")=="date"){N=a.clone();m=N.wrap("<div/>").parent().html();m=e(m.replace(/type/i,"type=text data-orig-type"));c.value&&m.val(c.value);a.replaceWith(m);
a=m}a.addClass(f.input);var G=a.add(h);if(!k.length){k=e("<div><div><a/><div/><a/></div><div><div/><div/></div></div>").hide().css({position:"absolute"}).attr("id",f.root);k.children().eq(0).attr("id",f.head).end().eq(1).attr("id",f.body).children().eq(0).attr("id",f.days).end().eq(1).attr("id",f.weeks).end().end().end().find("a").eq(0).attr("id",f.prev).end().eq(1).attr("id",f.next);Q=k.find("#"+f.head).find("div").attr("id",f.title);if(c.selectors){var A=e("<select/>").attr("id",f.month),B=e("<select/>").attr("id",
f.year);Q.html(A.add(B))}m=k.find("#"+f.days);for(var R=0;R<7;R++)m.append(e("<span/>").text(K.shortDays[(R+c.firstDay)%7]));e("body").append(k)}if(c.trigger)J=e("<a/>").attr("href","#").addClass(f.trigger).click(function(b){c.toggle?h.toggle():h.show();return b.preventDefault()}).insertAfter(a);var O=k.find("#"+f.weeks);B=k.find("#"+f.year);A=k.find("#"+f.month);e.extend(h,{show:function(b){if(!(a.attr("readonly")||a.attr("disabled")||w)){b=b||e.Event();b.type="onBeforeShow";G.trigger(b);if(!b.isDefaultPrevented()){e.each(Y,
function(){this.hide()});w=true;A.unbind("change").change(function(){h.setValue(B.val(),e(this).val())});B.unbind("change").change(function(){h.setValue(e(this).val(),A.val())});L=k.find("#"+f.prev).unbind("click").click(function(){L.hasClass(f.disabled)||h.addMonth(-1);return false});M=k.find("#"+f.next).unbind("click").click(function(){M.hasClass(f.disabled)||h.addMonth();return false});h.setValue(o);var d=a.offset();if(/iPad/i.test(navigator.userAgent))d.top-=e(window).scrollTop();k.css({top:d.top+
a.outerHeight({margins:true})+c.offset[0],left:d.left+c.offset[1]});if(c.speed)k.show(c.speed,function(){r(b)});else{k.show();r(b)}return h}}},setValue:function(b,d,g){var i=v(d)>=-1?new Date(v(b),v(d),v(g==I||isNaN(g)?1:g)):b||o;if(i<n)i=n;else if(i>q)i=q;if(typeof b=="string")i=z(b);b=i.getFullYear();d=i.getMonth();g=i.getDate();if(d==-1){d=11;b--}else if(d==12){d=0;b++}if(!w){j(i,c);return h}F=d;D=b;E=g;g=new Date(b,d,1-c.firstDay);g=g.getDay();var t=P(b,d),p=P(b,d-1),S;if(c.selectors){A.empty();
e.each(K.months,function(x,H){n<new Date(b,x+1,1)&&q>new Date(b,x,0)&&A.append(e("<option/>").html(H).attr("value",x))});B.empty();i=s.getFullYear();for(var l=i+c.yearRange[0];l<i+c.yearRange[1];l++)n<new Date(l+1,0,1)&&q>new Date(l,0,0)&&B.append(e("<option/>").text(l));A.val(d);B.val(b)}else Q.html(K.months[d]+" "+b);O.empty();L.add(M).removeClass(f.disabled);l=!g?-7:0;for(var u,y;l<(!g?35:42);l++){u=e("<a/>");if(l%7===0){S=e("<div/>").addClass(f.week);O.append(S)}if(l<g){u.addClass(f.off);y=p-
g+l+1;i=new Date(b,d-1,y)}else if(l>=g+t){u.addClass(f.off);y=l-t-g+1;i=new Date(b,d+1,y)}else{y=l-g+1;i=new Date(b,d,y);if(W(o,i))u.attr("id",f.current).addClass(f.focus);else W(s,i)&&u.attr("id",f.today)}n&&i<n&&u.add(L).addClass(f.disabled);q&&i>q&&u.add(M).addClass(f.disabled);u.attr("href","#"+y).text(y).data("date",i);S.append(u)}O.find("a").click(function(x){var H=e(this);if(!H.hasClass(f.disabled)){e("#"+f.current).removeAttr("id");H.attr("id",f.current);j(H.data("date"),c,x)}return false});
f.sunday&&O.find(f.week).each(function(){var x=c.firstDay?7-c.firstDay:0;e(this).children().slice(x,x+1).addClass(f.sunday)});return h},setMin:function(b,d){n=z(b);d&&o<n&&h.setValue(n);return h},setMax:function(b,d){q=z(b);d&&o>q&&h.setValue(q);return h},today:function(){return h.setValue(s)},addDay:function(b){return this.setValue(D,F,E+(b||1))},addMonth:function(b){b=F+(b||1);var d=P(D,b);d=E<=d?E:d;return this.setValue(D,b,d)},addYear:function(b){return this.setValue(D+(b||1),F,E)},destroy:function(){a.add(document).unbind("click.d").unbind("keydown.d");
k.add(J).remove();a.removeData("dateinput").removeClass(f.input);N&&a.replaceWith(N)},hide:function(b){if(w){b=e.Event();b.type="onHide";G.trigger(b);e(document).unbind("click.d").unbind("keydown.d");if(b.isDefaultPrevented())return;k.hide();w=false}return h},toggle:function(){return h.isOpen()?h.hide():h.show()},getConf:function(){return c},getInput:function(){return a},getCalendar:function(){return k},getValue:function(b){return b?V(o,b,c.lang):o},isOpen:function(){return w}});e.each(["onBeforeShow",
"onShow","change","onHide"],function(b,d){e.isFunction(c[d])&&e(h).bind(d,c[d]);h[d]=function(g){g&&e(h).bind(d,g);return h}});c.editable||a.bind("focus.d click.d",h.show).keydown(function(b){var d=b.keyCode;if(!w&&e(X).index(d)>=0){h.show(b);return b.preventDefault()}return b.shiftKey||b.ctrlKey||b.altKey||d==9?true:b.preventDefault()});z(a.val())&&j(o,c)}e.tools=e.tools||{version:"v1.2.6"};var Y=[],T,X=[75,76,38,39,74,72,40,37],C={};T=e.tools.dateinput={conf:{format:"mm/dd/yy",selectors:false,yearRange:[-5,
5],lang:"en",offset:[0,0],speed:0,firstDay:0,min:I,max:I,trigger:0,toggle:0,editable:0,css:{prefix:"cal",input:"date",root:0,head:0,title:0,prev:0,next:0,month:0,year:0,days:0,body:0,weeks:0,today:0,current:0,week:0,off:0,sunday:0,focus:0,disabled:0,trigger:0}},localize:function(a,c){e.each(c,function(j,r){c[j]=r.split(",")});C[a]=c}};T.localize("en",{months:"January,February,March,April,May,June,July,August,September,October,November,December",shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec",
days:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday",shortDays:"Sun,Mon,Tue,Wed,Thu,Fri,Sat"});var Z=/d{1,4}|m{1,4}|yy(?:yy)?|"[^"]*"|'[^']*'/g,$=e("<a/>");e.expr[":"].date=function(a){var c=a.getAttribute("type");return c&&c=="date"||!!e(a).data("dateinput")};e.fn.dateinput=function(a){if(this.data("dateinput"))return this;a=e.extend(true,{},T.conf,a);e.each(a.css,function(j,r){if(!r&&j!="prefix")a.css[j]=(a.css.prefix||"")+(r||j)});var c;this.each(function(){var j=new aa(e(this),a);Y.push(j);
j=j.getInput().data("dateinput",j);c=c?c.add(j):j});return c?c:this}})(jQuery);

